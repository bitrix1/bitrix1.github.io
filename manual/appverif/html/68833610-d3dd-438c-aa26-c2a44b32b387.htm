<html DIR="LTR" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=Windows-1252"></META><META NAME="save" CONTENT="history"></META><title>Debugging Continuable and Non-Continuable Stops</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"></link><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"></input><input type="hidden" id="hiddenScrollOffset"></input></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"></img><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"></img><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"></img><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"></img><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"></img><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"></img><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Debugging Continuable and Non-Continuable Stops</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p></p><h2 class="heading">Debugging a Continuable Stop</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns=""> Here is an example of an invalid handle exception that has been raised by the Detect invalid handle usage option.</p><p xmlns="">First, the following message appears:</p><p xmlns="">Invalid handle - code c0000008 (first chance)</p><p xmlns="">===================================================</p><p xmlns="">VERIFIER STOP 00000300: pid 0x558: invalid handle exception for current stack trace</p><p xmlns="">        C0000008 : Exception code.</p><p xmlns="">        0012FBF8 : Exception record. Use .exr to display it.</p><p xmlns="">        0012FC0C : Context record. Use .cxr to display it.</p><p xmlns="">        00000000 :</p><p xmlns="">===================================================</p><p xmlns="">This verifier stop is continuable.</p><p xmlns="">After debugging it use 'go' to continue.</p><p xmlns="">===================================================</p><p xmlns="">Break instruction exception - code 80000003 (first chance)</p><p xmlns="">eax=00000000 ebx=6a27c280 ecx=6a226447 edx=0012fa4c esi=00942528 edi=6a27c260</p><p xmlns="">eip=6a22629c esp=0012facc ebp=0012faf0 iopl=0         nv up ei pl zr na po nc</p><p xmlns="">cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246</p><p xmlns="">ntdll!DbgBreakPoint:</p><p xmlns="">6a22629c cc               int     3</p><p xmlns="">Notice that the message tells you that this Application Verifier Stop can be continued. After you understand what has transpired, you can continue running the target application.</p><p xmlns="">First, you should use the !avrf extension. This gives information about the current failure:</p><p xmlns="">0:000&gt; !avrf</p><p xmlns="">Global flags: 00000100</p><p xmlns="">Application verifier global flag is set.</p><p xmlns="">Application verifier settings (00000004):</p><p xmlns="">   - no heap checking enabled!</p><p xmlns="">   - handle checks</p><p xmlns="">Page heap is not active for this process.</p><p xmlns="">Current stop 00000300 : c0000008 0012fbf8 0012fc0c 00000000 .</p><p xmlns="">    Using an invalid handle (either closed or simply bad).</p><p xmlns="">The final line of this display summarizes the problem.</p><p xmlns="">You may want to look at some logs at this point. After you are done, use the g (Go) command to start the application again:</p><p xmlns="">0:000&gt; g</p></content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><h3 class="subHeading" xmlns="">Debugging a Non-Continuable Stop</h3><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns=""> Here is an example of an access violation that has been raised by the page heap option.</p><p xmlns="">First, the following message appears:</p><p xmlns="">Access violation - code c0000005 (first chance)</p><p xmlns="">===================================================</p><p xmlns="">VERIFIER STOP 00000008: pid 0x504: exception raised while verifying block header</p><p xmlns="">        00EC1000 : Heap handle</p><p xmlns="">        00F10FF8 : Heap block</p><p xmlns="">        00000000 : Block size</p><p xmlns="">        00000000 :</p><p xmlns="">===================================================</p><p xmlns="">This verifier stop is not continuable. Process will be terminated when you use the 'go' debugger command.</p><p xmlns="">===================================================</p><p xmlns="">Break instruction exception - code 80000003 (first chance)</p><p xmlns="">eax=00000000 ebx=00000000 ecx=6a226447 edx=0012fab7 esi=00f10ff8 edi=00000008</p><p xmlns="">eip=6a22629c esp=0012fb5c ebp=0012fb80 iopl=0         nv up ei pl zr na po nc</p><p xmlns="">cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246</p><p xmlns="">ntdll!DbgBreakPoint:</p><p xmlns="">6a22629c cc               int     3</p><p xmlns="">In this case, the message tells you that this Application Verifier Stop cannot be continued. The error is too severe for the process to continue running, and there is no way for Application Verifier to salvage the process.</p><p xmlns="">The !avrf extension can be used to give information about the current failure:</p><p xmlns="">0:000&gt; !avrf</p><p xmlns="">Global flags: 02000100</p><p xmlns="">Application verifier global flag is set.</p><p xmlns="">Page heap global flag is set.</p><p xmlns="">Application verifier settings (00000001):</p><p xmlns="">   - full page heap</p><p xmlns="">Page heaps active in the process (format: pageheap, lightheap, flags):</p><p xmlns="">    00941000 , 00a40000 , 3 (pageheap traces )</p><p xmlns="">    00b41000 , 00c40000 , 3 (pageheap traces )</p><p xmlns="">    00cb1000 , 00db0000 , 3 (pageheap traces )</p><p xmlns="">    00ec1000 , 00fc0000 , 3 (pageheap traces )</p><p xmlns="">Current stop 00000008 : 00ec1000 00f10ff8 00000000 00000000 .</p><p xmlns="">    Corrupted heap block.</p><p xmlns="">The final line of this display summarizes the problem.</p><p xmlns="">You may also want to look at some logs at this point. You may want to use the .restart (Restart Target Application) command at this point. Or perhaps you may prefer to end your Application Verifier session and begin fixing the bugs in your code.</p></content></div></sections></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><p></p><hr></hr><br /><br /></div></div></body></html>
<html DIR="LTR" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=Windows-1252"></META><META NAME="save" CONTENT="history"></META><title>Debugger install and setup</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"></link><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"></input><input type="hidden" id="hiddenScrollOffset"></input></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"></img><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"></img><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"></img><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"></img><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"></img><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"></img><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Debugger install and setup</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p>Microsoft Debugging Tools for Windows is available in three different versions: a 32-bit package and two 64-bit packages. These packages can be installed from the Web.</p><p>Some Application Verifier actions can result in an exception being raised. The debugger must be set to catch these exceptions on the second chance, because Application Verifier itself will be handling the first chance exceptions.</p><p>The exceptions raised are of three types:</p><ul><li class="unordered">
An access violation exception (0xC0000005) is generated if the heap option detects a heap buffer overrun. In some cases, the Check system path usage option can cause an access violation as well. <br /><br /></li><li class="unordered">
An invalid handle exception (0xC0000008) is generated when the Detect invalid handle usage option detects an invalid handle operation. <br /><br /></li><li class="unordered">
A stack overflow exception (0xC00000FD) is generated when the Check for adequate stack option detects that the initial stack was too short. <br /><br /></li></ul><p>The easiest way to prepare for these events is to start the debugger on a command line as follows:</p><p>windbg -xd av -xd ch -xd sov ApplicationCommandLine</p><p>or</p><p>cdb -xd av -xd ch -xd sov ApplicationCommandLine</p><p>If you have already started the debugger, you can use the sxd (Set Exceptions) command to catch all access violations, invalid handles, and stack overflows as second-chance exceptions:</p><p>0:000&gt; sxd av </p><p>0:000&gt; sxd ch </p><p>0:000&gt; sxd sov </p><p>Note  It is theoretically possible to control Application Verifier through a kernel debugger. However, this is not recommended — it requires frequent use of the .process and .pagein commands, yet it gives you no more power than using a user-mode debugger.</p><h2 class="heading">Installing from the Web</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">To download the latest version of the tools, go to the Debugging Tolls for Windows website (<a href="http://go.microsoft.com/fwlink/?linkid=8708" target="_blank" class="external" alt="">http://go.microsoft.com/fwlink/?linkid=8708</a>) and follow the instructions. The tool package is updated frequently, so updating your tools from the website assures that you have the most powerful debugging tools possible.</p></content></div><h2 class="heading">Configuring Hardware for User-Mode Debugging</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">User-mode debugging is generally done on a single machine: the debugger is run on the same computer as the application that failed.</p><p xmlns="">In this case, no specific hardware setup is required. Throughout this document, the terms host computer and target computer are interchangeable in this case.</p></content></div><h2 class="heading">Configuring Software for User-Mode Debugging</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"></content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"></content><sections xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><h4 class="subHeading" xmlns="">Basic User-Mode Configuration</h4><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">Before you can begin user-mode debugging, you must install the necessary symbol files and set certain environment variables.</p></content></div><h4 class="subHeading" xmlns="">Installing the Symbol Files</h4><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">You must install the symbol files for the user-mode process that is being debugged. If this is an application you have written, it should be built with full symbol files. If it is a commercial application, the symbol files may be on the product disk; if not, contact the manufacturer.</p><p xmlns="">If possible, you should also install the symbol files for the version of Microsoft Windows on which the user-mode process is running.</p><p xmlns="">If you are performing remote debugging, the symbol file location depends on the method you are using:</p><p xmlns="">If you are performing remote debugging through the debugger, the symbol files should be on the computer with the debugging server. </p><p xmlns="">If you are performing remote debugging through remote.exe, the symbol files should be on the computer with the debugger. </p><p xmlns="">If you are performing remote debugging through a process server or a KD connection server, the symbol files should be on computer with the smart client. </p><p xmlns="">If you are controlling the user-mode debugger from the kernel debugger, the symbol files need to be on both computers.</p></content></div><h4 class="subHeading" xmlns="">Configuring Environment Variables</h4><div class="subSection" xmlns=""><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">The debugger uses a variety of environment variables to indicate a number of important settings.</p><p xmlns="">For more information on debuggers, please visit <a href="http://go.microsoft.com/fwlink/?linkid=8708" target="_blank" class="external" alt="">http://go.microsoft.com/fwlink/?linkid=8708</a>. </p></content></div></sections></div></sections></div><h2 class="heading">Configuring Application Verifier with the Debugger using the Command line</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns="">To configure Application Verifier you can use the CDB or NTSD command line.</p><p xmlns="">Use the following command line: </p><p xmlns="">cdb OtherOptions -vf:Flags Target</p><p xmlns="">Where Target is the name of the target application, and Flags specifies the desired Application Verifier options that are to be applied to this target.</p><p xmlns="">Flags should be a sum of the bits representing the desired options. The individual bit values are as follows:</p><h3 class="subHeading" xmlns=""></h3><table xmlns=""><tr><td colspan="1"><p><b>Flag value</b></p></td><td colspan="1"><p><b>Meaning</b></p></td></tr><tr><td colspan="1"><p>00000001</p></td><td colspan="1"><p>HEAP CHECKS</p></td></tr><tr><td colspan="1"><p>00000004</p></td><td colspan="1"><p>HANDLE CHECKS</p></td></tr><tr><td colspan="1"><p>00000008</p></td><td colspan="1"><p>LOW RESOURCE SIM CHECKS</p></td></tr><tr><td colspan="1"><p>00000020</p></td><td colspan="1"><p>TLS CHECKS</p></td></tr><tr><td colspan="1"><p>00000040</p></td><td colspan="1"><p>DIRTY STACKS</p></td></tr><tr><td colspan="1"><p>00000200</p></td><td colspan="1"><p>DANGEROUS APIS</p></td></tr><tr><td colspan="1"><p>00001000</p></td><td colspan="1"><p>EXCEPTION CHECKS</p></td></tr><tr><td colspan="1"><p>00002000</p></td><td colspan="1"><p>MEMORY CHECKS</p></td></tr><tr><td colspan="1"><p>00020000</p></td><td colspan="1"><p>MISCELLANEOUS CHECKS</p></td></tr><tr><td colspan="1"><p>00040000</p></td><td colspan="1"><p>LOCK CHECKS</p></td></tr></table><p xmlns=""></p></content></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><p></p><hr></hr><br /><br /></div></div></body></html>
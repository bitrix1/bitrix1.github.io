<html DIR="LTR" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=Windows-1252"></META><META NAME="save" CONTENT="history"></META><title>Free memory containing an active critical section</title><link rel="stylesheet" type="text/css" href="../local/Classic.css"></link><script src="../local/script.js"></script></head><body><div><input type="hidden" id="userDataCache" class="userDataStyle"></input><input type="hidden" id="hiddenScrollOffset"></input></div><img id="dropDownImage" style="display:none; height:0; width:0;" src="../local/drpdown.gif"></img><img id="dropDownHoverImage" style="display:none; height:0; width:0;" src="../local/drpdown_orange.gif"></img><img id="collapseImage" style="display:none; height:0; width:0;" src="../local/collapse.gif"></img><img id="expandImage" style="display:none; height:0; width:0;" src="../local/exp.gif"></img><img id="copyImage" style="display:none; height:0; width:0;" src="../local/copycode.gif"></img><img id="copyHoverImage" style="display:none; height:0; width:0;" src="../local/copycodeHighlight.gif"></img><div id="header"><table width="100%" id="topTable"><tr id="headerTableRow1"><td align="left"><span id="runningHeaderText"></span></td></tr><tr id="headerTableRow2"><td align="left"><span id="nsrTitle">Free memory containing an active critical section</span></td></tr><tr id="headerTableRow3"><td></td></tr></table></div><div id="mainSection"><div id="mainBody"><div id="allHistory" class="saveHistory" onsave="saveAll()" onload="loadAll()"></div><p></p><h2 class="heading">Application Verifier break message</h2><div id="sectionSection0" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns=""> Free memory containing an active critical section.</p></content></div><h2 class="heading">Probable cause</h2><div id="sectionSection1" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns=""> This stop is generated if the memory containing a critical section was freed but the critical section has not been deleted using DeleteCriticalSection. </p><p xmlns="">The critical section must have been in a memory range freed by kernel-mode code or freed cross-process by APIs like VirtualFreeEx. Typically, this stop will be encountered if a previous break was continued. For example, if you encountered the Released heap memory of size &lt;size&gt; at &lt;address&gt; containing an active lock &lt;lock address&gt; break and then chose to continue running the code you may expect to encounter this break message as well. In most cases the lock verifier detects immediately leaked critical sections contained in a heap allocation, a DLL range, a virtual memory allocation or a MapViewOfFile mapped memory range and issues different stops in these cases. So there are very few cases left for this verifier stop.</p></content></div><h2 class="heading">Information displayed by Application Verifier</h2><div id="sectionSection2" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns=""> Parameter1 - Critical section address. Run 
    <b>!cs –s </b><i>address</i>
   to get more information.</p><p xmlns="">Parameter2 - Critical section debug info address</p><p xmlns="">Parameter3 - Critical section initialization stack trace. Run 
    <b>dps </b><i>address</i>
   to dump the stack trace.</p><p xmlns="">Parameter4 - Not used</p><p xmlns="">Description - Free memory containing an active critical section</p></content></div><h2 class="heading">Additional information</h2><div id="sectionSection3" class="section"><content xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5"><p xmlns=""> Verifier Stop Code 0204.</p><p xmlns="">Check the contents of the current call stack when the memory was released.</p><p xmlns="">Frequency of this error is low.</p><p xmlns="">To debug this stop use the following debugger commands:</p><p xmlns="">!cs –s –d parameter2 - dump information about this critical section.</p><p xmlns="">dds parameter3 - to identify the code path for initializing this critical section.</p></content></div><!--[if gte IE 5]>
			<tool:tip element="languageFilterToolTip" avoidmouse="false"/>
		<![endif]--></div><div id="footer"><p></p><hr></hr><br /><br /></div></div></body></html>